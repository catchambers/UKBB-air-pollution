---
title: "Air Pollution and Lung Cancer - Data Analysis"
author: "Caitlyn Chitwood"
date: "2022-11-07"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library("survival")
```

```{r infile, include=FALSE}
#Import TSV file, store in data frame
df <- readRDS("C:/Users/Caitlyn/Box/Research/air_pollution/Datasets/ukbbPM25Lung.rds")

attach(df)
```


```{r model1}
##Cox Regression Model 1 - Age and Sex covariates only
res.model1 <- coxph(
  Surv(t_TotalCancer, dt_Lung) ~  pm252010Per5 + ageBaseline + sex,
  data = ukbbPM25Lung,
  ties = "efron"
)

summary(res.model1)
```

```{r model 2}
##Model 2 - Multiple covariates

res.model2 <- coxph(
  Surv(t_TotalCancer, dt_Lung) ~  pm252010Per5 + ageBaseline + sex + householdIncomeCat + education + bmiCat + smokingCat +  exposeSmokeHomeImputed + lungFamilyHistory ,
  data = ukbbPM25Lung,
  ties = "efron"
)

summary(res.model2)
```
